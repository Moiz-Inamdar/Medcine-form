<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Medical & Medicine Entry</title>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- AutoTable Plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>

<style>
    body {
        font-family: Arial, sans-serif;
        padding: 30px;
    }
    .box {
        width: 400px;
        position: relative;
        margin: auto;
    }
    input {
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        font-size: 16px;
    }
    .suggestions {
        position: absolute;
        background: white;
        border: 1px solid #ccc;
        width: 100%;
        max-height: 150px;
        overflow-y: auto;
        display: none;
        z-index: 100;
    }
    .suggestions div {
        padding: 10px;
        cursor: pointer;
    }
    .suggestions div:hover {
        background: #f1f1f1;
    }
    button {
        width: 100%;
        padding: 12px;
        background: green;
        color: white;
        border: none;
        font-size: 18px;
        cursor: pointer;
        margin-top: 5px;
    }
    table {
        width: 90%;
        margin: 25px auto;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid black;
        padding: 8px;
    }
    th {
        background: #eef0f4;
    }
</style>

</head>
<body>

<h2 style="text-align:center;">Medical Billing Input</h2>

<div class="box">

    <input type="text" id="medicalName" placeholder="Search Medical Name">
    <div class="suggestions" id="medicalSuggest"></div>

    <input type="text" id="medicine" placeholder="Search Medicine Name">
    <div class="suggestions" id="medicineSuggest"></div>

    <input type="number" id="quantity" placeholder="Quantity">
    <input type="text" id="free" placeholder="Free Text / Notes">

    <button onclick="addEntry()">Add</button>
</div>

<table id="mainTable">
    <thead>
        <tr>
            <th>Medical Name</th>
            <th>Medicine Name</th>
            <th>Quantity</th>
            <th>Notes</th>
        </tr>
    </thead>
    <tbody id="outputTable"></tbody>
    
</table>

<button onclick="downloadPDF()" style="background:crimson;margin-top:10px;">
    Download Data (PDF)
</button>

<script>

/* ------------------------ PDF DOWNLOAD ------------------------- */

function downloadPDF() {
    const { jsPDF } = window.jspdf;
    let doc = new jsPDF();

    doc.setFontSize(18);
    doc.text("Medical Billing Data", 14, 15);

    doc.autoTable({
        html: "#mainTable",
        startY: 25,
        theme: "grid"
    });

    doc.save("medical_data.pdf");
}

/* ------------------------ AUTO COMPLETE DATA ------------------------- */

const medicalList = [
    "PRIME MEDICAL & GENERAL STORES",
    "LIFE CARE HOSPITAL",
    "G.K. MED & GEN STORES",
    "JEERGAL CHILDREN HOSPITAL",
    "M/S VIKAS MEDICAL & GENERAL STORES",
    "DR. SEETA BIRADAR",
    "NEW SANJEEVANI MEDICAL & GENERAL STORES",
    "AL-HASHMI & ASIF MED & GEN",
    "JANANI PHARMA",
    "M/S. KAKHANDAKI MEDICAL & GENERAL STORES",
    "KUCHANUR MED & GEN STORES",
    "DR IQBAL",
    "SHAIKH HOSPITAL",
    "A TO Z MEDICAL",
    "Dr Touseef"
];

const medicineList = [
    "Avovent-LI",
    "Budazest Respules",
    "Klinmol I.V",
    "Leazyme DS Syp",
    "Avokid Baby Massage Oil",
    "Avokid Baby Lotion",
    "Electrofit ORS",
    "Pindine Gargle",
    "Gudzinc Syp",
    "Notemp-MF",
    "Avokuf-LS Drops",
    "Cefrock-S 1.5gm",
    "Zincopace Syp",
    "Ibupin Oral Sus",
    "C-Hep-T Syp",
    "Colipin Drops",
    "Bosskid Sus",
    "Ibuhelp Plus Sus",
    "Vomibar Drops",
    "Ofoklin-MS Sus",
    "Cefrock 1gm",
    "Colipin-D Drops",
    "Safrozol-Plus Ontiment",
    "Semiklin 250mg Inj",
    "Allify MT Susp",
    "CDM Susp",
    "Safurox-500 Tab",
    "Xpace Tab",
    "Xpace-SP Tab",
    "Moxitec-CV-625 Tab",
    "Safazi-250 Tab",
    "Papra-40 Tab",
    "Rapra-DSR Cap",
    "Moxitec-CV Dry Syp",
    "Moxitec-CV-Forte",
    "Lini Gel",
    "Cynim-P Tab",
    "Levzin-M Tab",
    "Cebaxim-50LB",
    "C-HEP-T Syp",
    "Upwell Syp",
    "Notemp-MF",
    "Cebaxim-O",
    "Q-Rex-LS Syp",
    "Upwell Drop",
    "Itrakin-200 Cap",
    "Ketonik-2% Soap",
    "Lulinik Cream",
    "RG-Best Sachet",
    "Notemp-AF Drop",
    "Byndrol LS",
    "Byndrol AG"
];

/* ------------------------ GENERIC AUTOCOMPLETE ------------------------ */

function setupAutocomplete(inputId, suggestionId, listArray) {
    const input = document.getElementById(inputId);
    const suggestBox = document.getElementById(suggestionId);

    input.addEventListener("input", function () {
        let value = this.value.toLowerCase();
        suggestBox.innerHTML = "";

        if (value === "") {
            suggestBox.style.display = "none";
            return;
        }

        let filtered = listArray.filter(item =>
            item.toLowerCase().includes(value)
        );

        if (filtered.length === 0) {
            suggestBox.style.display = "none";
        } else {
            suggestBox.style.display = "block";

            filtered.forEach(item => {
                let div = document.createElement("div");
                div.textContent = item;

                div.onclick = function () {
                    input.value = item;
                    suggestBox.style.display = "none";
                };

                suggestBox.appendChild(div);
            });
        }
    });
}

setupAutocomplete("medicalName", "medicalSuggest", medicalList);
setupAutocomplete("medicine", "medicineSuggest", medicineList);

/* ----------------------- ADD TABLE ENTRY ------------------------- */

function addEntry() {
    let medStore = document.getElementById("medicalName").value;
    let medName = document.getElementById("medicine").value;
    let qty = document.getElementById("quantity").value;
    let notes = document.getElementById("free").value;

    if (medStore === "" || medName === "") {
        alert("Please select both medical name and medicine name.");
        return;
    }

    let table = document.getElementById("outputTable");

    table.innerHTML += `
        <tr>
            <td>${medStore}</td>
            <td>${medName}</td>
            <td>${qty}</td>
            <td>${notes}</td>
        </tr>
    `;

    document.getElementById("medicalName").value = "";
    document.getElementById("medicine").value = "";
    document.getElementById("quantity").value = "";
    document.getElementById("free").value = "";
}

</script>

</body>
</html>
